/*! STE - v0.0.1 - 2014-11-25 */function resetForm($form){$form.find("input").each(function(){"text"==$(this).attr("type")?$(this).val(""):("radio"==$(this).attr("type")||"checkbox"==$(this).attr("type"))&&($(this).prop("checked",!1),$(this).parent().find("label").removeClass("checked"))}),$form.find("textarea").each(function(){$(this).val("")});var $selects=$form.find("select"),selectTotal=$selects.length;$selects.each(function(i){$(this).find("option:eq(0)").prop("selected",!0),i===selectTotal-1&&$form.find(".selectpicker").selectpicker("refresh")});var validator=$form.validate();validator.resetForm(),$form.find(".bootstrap-select.error").removeClass("error"),$form.find(".error-messages").remove()}function sendEditClient(){editForm($("#edit-cliente-form"),"cliente")}function editForm($form,entidad){if($form.valid()){var postData=$form.serialize()+"&accion=update&id="+id,formURL=$form.attr("action");$.ajax({url:formURL,type:"GET",data:postData,success:function(data){"true"==data.success?($(".edit-user-form-holder").height()<190&&$(".edit-user-form-holder").height($(".edit-user-form-holder").height()+35),$form.find(".form-container").find("div:not(#message_div_modal)").hide(0),$form.find("#span_message_modal").html("El "+entidad+" ha sido modificado de forma correcta.<br/>En breve volvemos a la p&aacute;gina."),$("#modal-footer_submit").css("display","none"),$("#message_div_modal").css("display","block").removeClass("error").addClass("success"),setTimeout(function(){resetForm($form),location.reload()},1500)):($("#message_div_modal").removeClass("success").addClass("error"),$(".edit-user-form-holder").height()<190&&$(".edit-user-form-holder").height($(".edit-user-form-holder").height()+35),$("#span_message_modal").html(data.error),$("#message_div_modal").css("display","block"))}},"html")}}function changeActionsButtonColor(){$("#accion_menu").hasClass("white")?$("#accion_menu").removeClass("white"):$("#accion_menu").addClass("white")}function isIE(){var myNav=navigator.userAgent.toLowerCase();return-1!=myNav.indexOf("msie")?parseInt(myNav.split("msie")[1]):!1}function drawLetters(){var isEmpty,letra,cajas=$(".clients_container").children(),a=0,letrasValidas="";for(a;a<=cajas.length-1;a++){var div=$(cajas[a]);if(div.hasClass("letter_anchor"))isEmpty=!0,letra=div;else if(div.hasClass("clientes_letra")){var clientes=div.children(),b=0;for(b;b<=clientes.length-1;b++){var cliente=$(clientes[b]);cliente.hasClass("hidden")||(isEmpty=!1)}1==isEmpty?(letra.css("display","none"),letra.prev().css("display","none"),div.css("display","none")):(letra.css("display","block"),letrasValidas+=$(letra.find("span")[0]).text(),letra.prev().css("display","inline-block"),div.css("display","inherit"))}}drawbar(letrasValidas)}function drawbar(string){var barra=$(".abc").children(),z=0;for(z=0;z<=barra.length-1;z++){var letras=$(barra[z]).children(),a=0;for(a;a<=letras.length-1;a++){var letra_div=$(letras[a]),letra=letra_div[0].id.substring(6,7);-1!=string.indexOf(letra)?(letra_div.attr("href","#"+letra+"_anchor"),letra_div.children().addClass("active"),letra_div.children().removeClass("inactive")):(letra_div.removeAttr("href"),letra_div.children().addClass("inactive"),letra_div.children().removeClass("active"))}}}function showModal(){initSelectpickers(),initDatepickers(),$("#ajax_loader").css("display","none"),$(".modal_ajax").css("display","block")}function resetFormSlider(){var $slider=$(".form-slider"),$buttons=$(".holder_buttons");$slider.css("left","0px"),$buttons.css("bottom","0px")}function validate_multiform(form,elements){var result=!0;return $.each(elements,function(index,value){form.validate().element(value)||(result=!1)}),result}function sendEditPrueba(){var $form=$("#edit-prueba-form");if($form.valid()){var postData=$form.serialize()+"&accion=update&id="+id,formURL=$form.attr("action");$.ajax({url:formURL,type:"GET",data:postData,success:function(data){"true"==data.success?($(".edit-user-form-holder").height()<190&&$(".edit-user-form-holder").height($(".edit-user-form-holder").height()+35),$form.find(".form-container").find("div:not(#message_div_modal)").hide(0),$form.find("#span_message_modal").html("La prueba ha sido modificado de forma correcta.<br/>En breve volvemos a la p&aacute;gina."),$("#modal-footer_submit").css("display","none"),$("#message_div_modal").css("display","block").removeClass("error").addClass("success"),setTimeout(function(){resetForm($form),location.reload()},1500)):($("#message_div_modal").removeClass("success").addClass("error"),$(".edit-user-form-holder").height()<190&&$(".edit-user-form-holder").height($(".edit-user-form-holder").height()+35),$("#span_message_modal").html(data.error),$("#message_div_modal").css("display","block"))}},"html")}}function sendEditSoporte(){var $form=$("#edit-soporte-form");if($form.valid()){var postData=$form.serialize()+"&accion=update&id="+id,formURL=$form.attr("action");$.ajax({url:formURL,type:"GET",data:postData,success:function(data){"true"==data.success?($(".edit-user-form-holder").height()<190&&$(".edit-user-form-holder").height($(".edit-user-form-holder").height()+35),$form.find(".form-container").find("div:not(#message_div_modal)").hide(0),$form.find("#span_message_modal").html("El soporte ha sido modificado de forma correcta.<br/>En breve volvemos a la p&aacute;gina."),$("#modal-footer_submit").css("display","none"),$("#message_div_modal").css("display","block").removeClass("error").addClass("success"),setTimeout(function(){resetForm($form),location.reload()},1500)):($("#message_div_modal").removeClass("success").addClass("error"),$(".edit-user-form-holder").height()<190&&$(".edit-user-form-holder").height($(".edit-user-form-holder").height()+35),$("#span_message_modal").html(data.error),$("#message_div_modal").css("display","block"))}},"html")}}function sendEditUser(){var $form=$("#edit-user-form");if($form.valid()){var postData=$form.serialize()+"&accion=update&id="+id,formURL=$form.attr("action");$.ajax({url:formURL,type:"GET",data:postData,success:function(data){"true"==data.success?($(".edit-user-form-holder").height()<190&&$(".edit-user-form-holder").height($(".edit-user-form-holder").height()+35),$form.find(".form-container").find("div:not(#message_div_modal)").hide(0),$form.find("#span_message_modal").html("El usuario ha sido modificado de forma correcta.<br/>En breve volvemos a la p&aacute;gina."),$("#modal-footer_submit").css("display","none"),$("#message_div_modal").css("display","block").removeClass("error").addClass("success"),setTimeout(function(){resetForm($form),location.reload()},1500)):($("#message_div_modal").removeClass("success").addClass("error"),$(".edit-user-form-holder").height()<190&&$(".edit-user-form-holder").height($(".edit-user-form-holder").height()+35),$("#span_message_modal").html(data.error),$("#message_div_modal").css("display","block"))}},"html")}}$(function(){initForms()});var initForms=function(){$("form").parent().find("button.close-form").off(".close-form").on("click.close-form",function(){$(this).parent().find("form");return $("#formButton").trigger("click"),!1}),$("form").find(".radio-container").each(function(){var $checkbox=$(this).find('input[type="checkbox"]'),$label=$(this).find("label");$checkbox.prop("checked")&&$label.addClass("checked"),$label.off(".check-label").on("click.check-label",function(){$(this).toggleClass("checked")})})};$(function(){$("#gestion_cliente").on("click","#deleteClient",function(){var formURL="/clientServlet?",postData="accion=delete&id="+id;$.ajax({url:formURL,type:"POST",data:postData,success:function(){$("#row"+id).fadeOut("fast",function(){$(this).remove(),$("#myTable").paginateMe({pagerSelector:"#myPager",showPrevNext:!0,hidePageNumbers:!1,perPage:10})}),$("#confirm-delete").modal("hide")}})}),$("#estado").change(function(){}),$("#estado").change(function(){$("#subestado").empty(),$("#estado").val().indexOf("Fileact")>=0?$("#subestado").append($("<option></option>").attr("value","Finalizado").text("Finalizado")):$("#estado").val().indexOf("Finalizado")>=0?($("#subestado").append($("<option></option>").attr("value","default").text("Seleccionar")),$("#subestado").append($("<option></option>").attr("value","Eliminado").text("Eliminado")),$("#subestado").append($("<option></option>").attr("value","Finalizado").text("Finalizado")),$("#subestado").append($("<option></option>").attr("value","Producción").text("Producción"))):$("#estado").val().indexOf("Parado")>=0?($("#subestado").append($("<option></option>").attr("value","default").text("Seleccionar")),$("#subestado").append($("<option></option>").attr("value","Pendiente").text("Pendiente")),$("#subestado").append($("<option></option>").attr("value","Parado").text("Parado"))):$("#estado").val().indexOf("Implementaci")>=0&&($("#subestado").append($("<option></option>").attr("value","default").text("Seleccionar")),$("#subestado").append($("<option></option>").attr("value","Producción").text("Producción")),$("#subestado").append($("<option></option>").attr("value","Pruebas").text("Pruebas"))),$("#estado").val().indexOf("Parado")>=0?$("#firma_contrato").css("display","none"):$("#firma_contrato").css("display","inline-block"),$("#subestado").selectpicker("refresh")})}),$(function(){initDatepickers(),initSelectpickers()});var initDatepickers=function(){$(".datepicker").each(function(){var $datepicker=$(this);if($datepicker.hasClass("datefuture"))if($datepicker.val()){var minDate=new Date(getIsoDate($datepicker.val()));$datepicker.datepicker({minDate:minDate})}else $datepicker.datepicker({minDate:0});else $datepicker.hasClass("datepast")?$datepicker.datepicker({maxDate:0}):$datepicker.datepicker();if($datepicker.hasClass("fromTo")){var $targetDatepicker=$("#"+$datepicker.data("target-id"));$datepicker.on("change.fromTo",function(){$targetDatepicker.datepicker("option","minDate",$datepicker.datepicker("getDate"))})}})},initSelectpickers=function(){$("html").find(".selectpicker").selectpicker()},getIsoDate=function(dateString){var collection=dateString.split("/"),day=collection[0],month=collection[1],year=collection[2],isoDate=year+"/"+month+"/"+day;return isoDate},userBoxSize,id;$(document).on("hidden.bs.modal",function(e){$(".modal-content").html(),$(e.target).removeData("bs.modal")}),$(function(){$("#myTable").paginateMe({pagerSelector:"#myPager",showPrevNext:!0,hidePageNumbers:!1,perPage:10}),$("html").on("click",".lapiz",function(){id=$(this).attr("name")}),$("html").on("click",".papelera",function(){id=$(this).attr("name")}),$("html").on("loaded.bs.modal",function(){showModal()}),$("#next_form").on("click",function(){var $slider=$(".form-slider"),pagina=$(this).data("pagina"),contenedores=($slider.css("left"),$(".form-slider").find(".form-container")),form=$($slider.parent()),$prevElement=$(contenedores[pagina-1]),elements=$prevElement.find("input, select"),$nextElement=$(contenedores[pagina]),$formholder=$(".form-holder");validate_multiform(form,elements)&&($(".holder_buttons").css("bottom",$prevElement.outerHeight()-$nextElement.outerHeight()),$formholder.animate({height:"+="+($nextElement.outerHeight()-$prevElement.outerHeight())},500),$slider.animate({left:"-=962px"},500),$(this).data=pagina+1)}),$("#buscador_cliente").on("keyup",function(){var busqueda=$(this).val(),ln_busqueda=busqueda.length,clientes=$(".client_box"),a=0;for(a;a<=clientes.length-1;a++)busqueda.toUpperCase()==$(clientes[a]).children().text().substring(0,ln_busqueda).toUpperCase()?$(clientes[a]).removeClass("search_h"):$(clientes[a]).addClass("search_h");drawLetters()}),$("#tipo_cliente").on("change",function(){var a,val=$("#tipo_cliente").val(),trs=$("#myTable").find("tr");if("Premium"==val)for(a=0;a<=trs.length;a++)$(trs[a]).hasClass("premium")||$(trs[a]).addClass("hidden");else for(a=0;a<=trs.length;a++)$(trs[a]).removeClass("hidden")}),$("#tip_crit").on("change",function(){var a,val=$("#tip_crit").val(),cajas=$(".client_box");if("Premium"==val)for(a=0;a<=cajas.length-1;a++)$(cajas[a]).hasClass("tipo_premium")||$(cajas[a]).addClass("hidden");else for(a=0;a<=cajas.length-1;a++)$(cajas[a]).removeClass("hidden");drawLetters()}),$(window).scroll(function(){var scroll=$(window).scrollTop();scroll>350?($("#abc_child_scroll").addClass("inScroll"),$("#abc_child_scroll").removeClass("scroll_hidden")):($("#abc_child_scroll").removeClass("inScroll"),$("#abc_child_scroll").addClass("scroll_hidden"))}),$(".clients").on("click","#accion_menu",function(){changeActionsButtonColor()}),$("#submit_form").on("click",function(e){e.preventDefault();var $form=$($(this).prev());if($form.valid()){var postData=$form.serialize()+"&accion=new",formURL=$form.attr("action");$.ajax({url:formURL,type:"GET",data:postData,success:function(data){"true"==data.success?($(".form-holder").height()<190&&$(".form-holder").height($(".form-holder").height()+35),$form.find(".form-container").find("div:not(#message_div)").hide(0),$form.find("#span_message").html("El usuario ha sido creado de forma correcta.<br/>En breve volvemos a la p&aacute;gina."),$("#message_div").css("display","block").removeClass("error").addClass("success"),setTimeout(function(){resetForm($form),location.reload()},1500)):($("#message_div").removeClass("success").addClass("error"),$(".form-holder").height()<190&&$(".form-holder").height($(".form-holder").height()+35),$("#span_message").html(data.error),$("#message_div").css("display","block"))},error:function(jqXHR,textStatus,errorThrown){errorThrown.length>0&&($("#span_message").html(errorThrown),$("#message_div").addClass("error").removeClass("success"))}})}return!1}),$("#submit_form_client").on("click",function(e){e.preventDefault();var $form=$($(this).prev());if($form.valid()){var postData=$form.serialize()+"&accion=new",formURL=$form.attr("action");$.ajax({url:formURL,type:"GET",data:postData,success:function(data){"true"==data.success?($(".form-holder").height()<190&&$(".form-holder").height($(".form-holder").height()+35),$form.find(".form-container").find("div:not(#message_div)").hide(0),$form.find("#span_message").html("El cliente ha sido creado de forma correcta.<br/>En breve volvemos a la p&aacute;gina."),$("#message_div").css("display","block").removeClass("error").addClass("success"),setTimeout(function(){resetForm($form),location.reload()},1500)):($("#message_div").removeClass("success").addClass("error"),$(".form-holder").height()<190&&$(".form-holder").height($(".form-holder").height()+35),$("#span_message").html(data.error),$("#message_div").css("display","block"))},error:function(jqXHR,textStatus,errorThrown){errorThrown.length>0&&($("#span_message").html(errorThrown),$("#message_div").addClass("error").removeClass("success"))}})}return!1}),$("#submit_form_support").on("click",function(e){e.preventDefault();var $form=$($(this).prev());if($form.valid()){var postData=$form.serialize()+"&accion=new",formURL=$form.attr("action");$.ajax({url:formURL,type:"GET",data:postData,success:function(data){"true"==data.success?($(".form-holder").height()<190&&$(".form-holder").height($(".form-holder").height()+35),$form.find(".form-container").find("div:not(#message_div)").hide(0),$form.find("#span_message").html("El soporte ha sido creado de forma correcta.<br/>En breve volvemos a la p&aacute;gina."),$("#message_div").css("display","block").removeClass("error").addClass("success"),setTimeout(function(){resetForm($form),location.reload()},1500)):($("#message_div").removeClass("success").addClass("error"),$(".form-holder").height()<190&&$(".form-holder").height($(".form-holder").height()+35),$("#span_message").html(data.error),$("#message_div").css("display","block"))},error:function(jqXHR,textStatus,errorThrown){errorThrown.length>0&&($("#span_message").html(errorThrown),$("#message_div").addClass("error").removeClass("success"))}})}return!1}),$("#submit_form_test").on("click",function(e){e.preventDefault();var $form=$($(this).prev());if($form.valid()){var postData=$form.serialize()+"&accion=new",formURL=$form.attr("action");$.ajax({url:formURL,type:"GET",data:postData,success:function(data){"true"==data.success?($(".form-holder").height()<190&&$(".form-holder").height($(".form-holder").height()+35),$form.find(".form-container").find("div:not(#message_div)").hide(0),$form.find("#span_message").html("La prueba ha sido creado de forma correcta.<br/>En breve volvemos a la p&aacute;gina."),$("#message_div").css("display","block").removeClass("error").addClass("success"),setTimeout(function(){resetForm($form),location.reload()},1500)):($("#message_div").removeClass("success").addClass("error"),$(".form-holder").height()<190&&$(".form-holder").height($(".form-holder").height()+35),$("#span_message").html(data.error),$("#message_div").css("display","block"))},error:function(jqXHR,textStatus,errorThrown){errorThrown.length>0&&($("#span_message").html(errorThrown),$("#message_div").addClass("error").removeClass("success"))}})}return!1}),$("#formButton").click(function(){$(".filter-option").html("Seleccionar");var $formButton=$(this);$formButton.hasClass("white-btn")?"visible"==$(".form-holder").css("overflow")&&(resetFormSlider(),$(".form-holder").css("overflow","hidden"),userBoxSize=$(".form-holder.open").outerHeight(),$(".form-holder.open").css("height",userBoxSize),setTimeout(function(){$(".form-holder.open").removeClass("open").css("height","0px")},25),setTimeout(function(){$("#formButton").removeClass("white-btn"),$($("#formButton").children()[0]).removeClass("blue");var $form=$formButton.parent().find("form");resetForm($form)},1e3)):"hidden"==$(".form-holder").css("overflow")&&($("#formButton").addClass("white-btn"),$($("#formButton").children()[0]).addClass("blue"),$(".form-holder").addClass("open"),userBoxSize>0&&setTimeout(function(){$(".form-holder").css("height",userBoxSize)},25),setTimeout(function(){$(".form-holder.open").css("height","auto")},1e3),setTimeout(function(){$(".form-holder").css("overflow","visible")},1e3))})}),$.fn.paginateMe=function(opts){function previous(){var goToPage=parseInt(pager.data("curr"))-1;goTo(goToPage)}function next(){goToPage=parseInt(pager.data("curr"))+1,goTo(goToPage)}function goTo(page){var startAt=page*perPage,endOn=startAt+perPage;children.css("display","none").slice(startAt,endOn).show(),page>=1?pager.find(".prev_link").show():pager.find(".prev_link").hide(),numPages-1>page?pager.find(".next_link").show():pager.find(".next_link").hide(),pager.data("curr",page),settings.numbersPerPage>1&&($(".page_link").hide(),$(".page_link").slice(page,settings.numbersPerPage+page).show()),pager.children().removeClass("active"),pager.children().eq(page+1).addClass("active"),$(resumen).html("");var ocursinpage2=10*(page+1)>numItems?numItems:10*(page+1);$(resumen).html(numItems>0?numItems>=10?"Resultados "+(10*(page+1)-9)+" a "+ocursinpage2+" de "+numItems:"Resultados "+(10*(page+1)-9)+" a "+ocursinpage2+" de "+numItems:"No hay resultados"),$.scollTop()}var $this=this,defaults={perPage:10,showPrevNext:!1,numbersperPage:10,hidePageNumbers:!1},settings=$.extend(defaults,opts),listElement=$this,perPage=settings.perPage,children=listElement.find(".valid-result"),pager=$(".pagination"),resumen=$(".pagesummary");"undefined"!=typeof settings.childSelector&&(children=listElement.find(settings.childSelector)),"undefined"!=typeof settings.pagerSelector&&(pager=$(settings.pagerSelector));var numItems=children.size(),numPages=Math.ceil(numItems/perPage);$(pager).html(""),pager.data("curr",0),settings.showPrevNext&&$('<li><a href="#" class="prev_link"><</a></li>').appendTo(pager);for(var curr=0;numPages>curr&&0==settings.hidePageNumbers;)$('<li><a href="#" class="page_link">'+(curr+1)+"</a></li>").appendTo(pager),curr++;settings.numbersPerPage>1&&($(".page_link").hide(),$(".page_link").slice(pager.data("curr"),settings.numbersPerPage).show()),settings.showPrevNext&&$('<li><a href="#" class="next_link">></a></li>').appendTo(pager),pager.find(".page_link:first").addClass("active"),pager.find(".prev_link").hide(),1>=numPages&&pager.find(".next_link").hide(),pager.children().eq(1).addClass("active"),children.hide(),children.slice(0,perPage).show();var currentPage=pager.children().eq(1).children().html(),ocursinpage=10*currentPage>numItems?numItems:10*currentPage;$(resumen).html(""),$(resumen).html(numItems>0?numItems>=10?"Resultados "+(10*currentPage-9)+" a "+ocursinpage+" de "+numItems:"Resultados "+(10*currentPage-9)+" a "+ocursinpage+" de "+numItems:"No hay resultados"),pager.find("li .page_link").click(function(){var clickedPage=$(this).html().valueOf()-1;return goTo(clickedPage,perPage),!1}),pager.find("li .prev_link").click(function(){return previous(),!1}),pager.find("li .next_link").click(function(){return next(),!1})},$(function(){$("#pruebas").on("click","#deletePrueba",function(){var formURL="/pruebaServlet?",postData="accion=delete&id="+id;$.ajax({url:formURL,type:"POST",data:postData,success:function(){$("#row"+id).fadeOut("fast",function(){$(this).remove(),$("#myTable").paginateMe({pagerSelector:"#myPager",showPrevNext:!0,hidePageNumbers:!1,perPage:10})}),$("#confirm-delete").modal("hide")}})}),$("#cliente-soporte").on("change",function(){var option=$(this).find(":selected");$("#input-premium-soporte").val(option.data("premium")),$("#input-segmento-soporte").val(option.data("segmento")),$("#client-id-input").val(option.data("clientid"))}),$("#pruebas").on("click","#test_filter_button",function(){var val_client_form=$("#cliente-filtro").val(),val_entorno_form=$("#entorno-filtro").val(),val_estado_form=$("#estado-filtro").val(),trs=$("#myTable").find("tr"),entradas=[];for(a=0;a<=trs.length;a++)entradas[a]=$(trs[a]);for(a=0;a<=trs.length;a++)$(trs[a]).removeClass("hidden");if(""!=val_client_form&&null!=val_client_form)for(a=0;a<=trs.length;a++)entradas[a].data("nombrecliente")!=val_client_form&&$(trs[a]).addClass("hidden");if(""!=val_entorno_form&&null!=val_entorno_form)for(a=0;a<=trs.length;a++)entradas[a].data("entorno")!=val_entorno_form&&$(trs[a]).addClass("hidden");if(""!=val_estado_form&&null!=val_estado_form)for(a=0;a<=trs.length;a++)entradas[a].data("estado")!=val_estado_form&&$(trs[a]).addClass("hidden")})});var normalize=function(){for(var from="ÃÀÁÄÂÈÉËÊÌÍÏÎÒÓÖÔÙÚÜÛãàáäâèéëêìíïîòóöôùúüûÑñÇç",to="AAAAAEEEEIIIIOOOOUUUUaaaaaeeeeiiiioooouuuunncc",mapping={},i=0,j=from.length;j>i;i++)mapping[from.charAt(i)]=to.charAt(i);return function(str){for(var ret=[],i=0,j=str.length;j>i;i++){var c=str.charAt(i);ret.push(mapping.hasOwnProperty(str.charAt(i))?mapping[c]:c)}return ret.join("")}}();$(function(){$(".search").on("keyup",function(e){var $table=$(this).closest("table").find("tbody").first(),$table_results=$table.children(),$current_input=$(this);$(this).closest("tr").find(".search-th").find("input").each(function(){$(this).is($current_input)||0==$(this).val().length||(multipleFilter=!0)});for(var e=0;e<$table_results.length;e++){var isValid=!0,$linea=$($table_results[e]);$(this).closest("tr").find(".search-th").find("input").each(function(){if(0!=$(this).val().length){var text=normalize($(this).val().toLowerCase()),columna=$(this).attr("class").split("col")[1];$(this).hasClass("search_anywhere")&&(columna=columna.split(" ")[0]);var cont=$($linea.children()[columna]).children().html().toLowerCase(),textLength=text.length;$(this).hasClass("search_anywhere")?-1==cont.indexOf(text)&&(isValid=!1):text!=cont.substring(0,textLength)&&(isValid=!1)}}),isValid?$linea.show().addClass("valid-result"):$linea.hide().removeClass("valid-result")}$table.paginateMe({pagerSelector:"#myPager",showPrevNext:!0,hidePageNumbers:!1,perPage:10})})}),$(function(){$("#sidebar").hover(function(){$(this).addClass("hovering")},function(){$(this).removeClass("hovering")})}),$(function(){var initialSearchWidthDesktop=$('.body-header .main-menu li.search input[type="search"]').css("width");$('.body-header .main-menu li.search input[type="search"]').focus(function(){$(this).animate({width:"180px"},"fast")}).focusout(function(){$(this).animate({width:initialSearchWidthDesktop},"fast")}),$(".body-header .main-menu li.search img").click(function(){""==$('.body-header .main-menu li.search input[type="search"]').val()?$('.body-header .main-menu li.search input[type="search"]').focus():(console.log($(this).closest("form").attr("action")),$(this).closest("form").submit())}),$(".navbar-trigger").click(function(){$(".tablet-header .main-menu").slideToggle()}),$(".menu-trigger").click(function(){var $element=$($(this).attr("data-target"));$element.is(":visible")?($(this).parent().find(".open").removeClass("open").next().slideUp(),$(this).removeClass("open"),$element.slideUp()):($(this).parent().find(".open").removeClass("open").next().slideUp(),$(this).addClass("open"),$element.slideDown())});var initialSearchWidthTablet=$('header.tablet-header .main-menu>div.header-buttons input[type="search"]').css("width"),initialAccesoHtml=$("header.tablet-header .main-menu>div.header-buttons a.btn.success").html();$("header.tablet-header .main-menu>div.header-buttons img").click(function(){return $(this).parent().find('input[type="search"]').focus(),!1});var textWidthHandle;$('header.tablet-header .main-menu>div.header-buttons input[type="search"]').focus(function(){clearTimeout(textWidthHandle);var $search=$(this);$search.parent().find("img").attr("src","img/icon-text-search-close.png").css("top","5px").unbind("click").click(function(){return $search.val("").focus(),!1});var $alta=$search.parent().find("a.btn:not(.success)"),$acceso=$search.parent().find("a.btn.success");$(window).width()<=480&&($acceso.html('<i class="icon-16 white ico-acceso-clientes"></i>'),$alta.html($alta.attr("data-smalltext"))),$search.animate({width:$search.parent().width()-90-$alta.width()-$acceso.width()},"fast")}).focusout(function(){var $search=$(this);textWidthHandle=setTimeout(function(){$search.parent().find("img").attr("src","img/icon-text-search-big.png").css("top","8px").unbind("click").click(function(){return $search.focus(),!1});var $alta=$search.parent().find("a.btn:not(.success)");$alta.html($alta.attr("data-fulltext")),$search.parent().find("a.btn.success").html(initialAccesoHtml),$search.animate({width:initialSearchWidthTablet},"fast")},200)})}),$(function(){$("#soporte").on("click","#deleteSoporte",function(){var formURL="/soporteServlet?",postData="accion=delete&id="+id;$.ajax({url:formURL,type:"POST",data:postData,success:function(){$("#row"+id).fadeOut("fast",function(){$(this).remove(),$("#myTable").paginateMe({pagerSelector:"#myPager",showPrevNext:!0,hidePageNumbers:!1,perPage:10})}),$("#confirm-delete").modal("hide")}})}),$("#cliente-soporte").on("change",function(){var option=$(this).find(":selected");$("#input-premium-soporte").val(option.data("premium")),$("#input-segmento-soporte").val(option.data("segmento")),$("#client-id-input").val(option.data("clientid"))})}),$(function(){$(".alta_usuario").on("click","#deleteUser",function(){var formURL="/usersServlet?",postData="accion=delete&id="+id;$.ajax({url:formURL,type:"POST",data:postData,success:function(){$("#row"+id).fadeOut("fast",function(){$(this).remove(),$("#myTable").paginateMe({pagerSelector:"#myPager",showPrevNext:!0,hidePageNumbers:!1,perPage:10})}),$("#confirm-delete").modal("hide")}})})}),$(function(){$.extend($.validator.messages,{required:"Este campo es obligatorio.",remote:"Por favor, rellena este campo.",email:"Por favor, escribe una direcci&oacuten de correo v&aacutelida.(Terminada en @bbva.com)",url:"Por favor, escribe una URL válida.",date:"Por favor, escribe una fecha válida.",dateISO:"Por favor, escribe una fecha (ISO) válida.",number:"Por favor, escribe un n&uacutemero v&aacutelido.",digits:"Por favor, escribe s&oacutelo dígitos.",creditcard:"Por favor, escribe un número de tarjeta válido.",equalTo:"Por favor, escribe el mismo valor de nuevo.",extension:"Por favor, escribe un valor con una extensión aceptada.",maxlength:$.validator.format("Por favor, no escribas más de {0} caracteres."),minlength:$.validator.format("Por favor, no escribas menos de {0} caracteres."),rangelength:$.validator.format("Por favor, escribe un valor entre {0} y {1} caracteres."),range:$.validator.format("Por favor, escribe un valor entre {0} y {1}."),max:$.validator.format("Por favor, escribe un valor menor o igual a {0}."),min:$.validator.format("Por favor, escribe un valor mayor o igual a {0}."),nifES:"Por favor, escribe un NIF válido.",nieES:"Por favor, escribe un NIE válido.",cifES:"Por favor, escribe un CIF válido."}),$.validator.addMethod("money",function(value,element){return this.optional(element)||/^-?(?:\d+|\d{1,3}(?:[\s\.,]\d{3})+)(?:[\.,]\d+)?$/.test(value)},"Por favor, introduce una cifra v&aacute;lida"),$.validator.addMethod("selected",function(value,element){var valid=!1;return"default"!=value?(valid=!0,$(element).parent().find(".bootstrap-select").removeClass("error")):$(element).parent().find(".bootstrap-select").addClass("error"),valid},"Por favor, selecciona un valor."),$.validator.addMethod("require-one",function(value,element){var valid=!1,selector="input[name="+$(element).attr("name")+"]";$(element).closest("form").find(selector).each(function(){$(this).is(":checked")&&(valid=!0)});var modal=-1!=$(element).attr("id").indexOf("modal");return 0==valid?modal?($("#message_div_cliente_modal").addClass("error"),$("#span_message_cliente_modal").text("Debe seleccionar un país")):($("#message_div_cliente").addClass("error"),$("#span_message_cliente").text("Debe seleccionar un país")):modal?($("#message_div_cliente_modal").removeClass("error"),$("#span_message_cliente_modal").text("")):($("#message_div_cliente").removeClass("error"),$("#span_message_cliente").text("")),valid},"Por favor, selecciona una opci&oacute;n."),initValidator()});var initValidator=function(){$("form").each(function(){$(this).validate({ignore:":hidden:not(select):not([type='radio']):not([type='checkbox'])",focusCleanup:!1,onkeyup:!1,submitHandler:function(form){form.submit()},errorPlacement:function(error,$element){var $target=$element.parent();$target.find(".error-messages").remove();var $container="";if($element.hasClass("selectpicker")&&($element=$target.find(".bootstrap-select")),($element.is(":checkbox")||$element.is(":radio"))&&$element.parent().hasClass("radio-container")){var $target=$element.closest(".radio-container-holder"),$container=$target.find("#error-messages");0==$container.length&&($container=$('<div id="error-messages" class="block-error server-errors"><ul></ul></div>'),$element.closest(".radio-container-holder").prepend($container));var $errorelement=$("<li>");$errorelement.append(error),$container.find("ul").append($errorelement)}else $container=$('<div class="error-messages"><ul></ul></div>'),$target.css({position:"relative"}).prepend($container);if(!$element.hasClass("no_message_error")){var $errorelement=$("<li>");$errorelement.append(error),$container.find("ul").append($errorelement);var leftPosition=0;$element.outerWidth()<$container.outerWidth()?leftPosition=($element.outerWidth()-$container.outerWidth())/2:$element.outerWidth()>$container.outerWidth()&&(leftPosition=($element.outerWidth()-$container.outerWidth())/2),$container.css({left:$element.position().left+leftPosition+"px",marginLeft:$element.css("margin-left"),maxWidth:"200px"}),$container.css({top:"-"+($container.outerHeight()+10)+"px"}),$element.hover(function(){$container.addClass("hover")},function(){$container.removeClass("hover")})}},success:function(label){label.closest(".error-messages").remove()}})})};